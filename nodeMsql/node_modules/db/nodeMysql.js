//mysql
var mysql = require('mysql');

var connection = mysql.createConnection({//链接配置数据库
  host : 'localhost',
  user : 'root',
  password : '123456',
  post : '3306',
  database:'nodemysql',
});
//连接测试
exports.connectTest = function(){
	return connection.connect(function(err){
  if (err) {
    console.log('[query] - :'+err); return;
  }
  console.log('[connection connect] succeed!' );
  console.log('connected as id ' + connection.threadId);
})
}

//连接blog
exports.selectFun = function(username,callback){
  //query:result是sql语句执行结果并作为数组形式存放在result中
  connection.query('select password from blog1 where username="'+username+'"',function(err,result,filed){
    if (err) {throw err;}
    callback(result);
  })}

exports.insertFun = function(username,password,email,callback){
  connection.query('insert into blog1(username,password,Emial) value("'+username+'","'+password+'","'+email+'")',function(err,result){
    if (err) {throw err;}
    callback(result);
  })
}
